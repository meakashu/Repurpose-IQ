import{r as Ze,g as en}from"./index-DEFJRS3b.js";function nn(o,n){for(var r=0;r<n.length;r++){const f=n[r];if(typeof f!="string"&&!Array.isArray(f)){for(const m in f)if(m!=="default"&&!(m in o)){const T=Object.getOwnPropertyDescriptor(f,m);T&&Object.defineProperty(o,m,T.get?T:{enumerable:!0,get:()=>f[m]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}var ee={},Se={},M={};Object.defineProperty(M,"__esModule",{value:!0});M.browserSupportsPolyfills=M.compareTwoStringsUsingDiceCoefficient=M.commandToRegExp=M.concatTranscripts=M.debounce=void 0;var tn=function(n,r,f){var m;return function(){var T=this,u=arguments,R=function(){m=null,f||n.apply(T,u)},v=f&&!m;clearTimeout(m),m=setTimeout(R,r),v&&n.apply(T,u)}};M.debounce=tn;var rn=function(){for(var n=arguments.length,r=new Array(n),f=0;f<n;f++)r[f]=arguments[f];return r.map(function(m){return m.trim()}).join(" ").trim()};M.concatTranscripts=rn;var an=/\s*\((.*?)\)\s*/g,sn=/(\(\?:[^)]+\))\?/g,on=/(\(\?)?:\w+/g,cn=/\*/g,un=/[-{}[\]+?.,\\^$|#]/g,ln=function(n){return n instanceof RegExp?new RegExp(n.source,"i"):(n=n.replace(un,"\\$&").replace(an,"(?:$1)?").replace(on,function(r,f){return f?r:"([^\\s]+)"}).replace(cn,"(.*?)").replace(sn,"\\s*$1?\\s*"),new RegExp("^"+n+"$","i"))};M.commandToRegExp=ln;var fn=function(n,r){if(n=n.replace(/\s+/g,"").toLowerCase(),r=r.replace(/\s+/g,"").toLowerCase(),!n.length&&!r.length)return 1;if(!n.length||!r.length)return 0;if(n===r)return 1;if(n.length===1&&r.length===1||n.length<2||r.length<2)return 0;for(var f=new Map,m=0;m<n.length-1;m++){var T=n.substring(m,m+2),u=f.has(T)?f.get(T)+1:1;f.set(T,u)}for(var R=0,v=0;v<r.length-1;v++){var O=r.substring(v,v+2),L=f.has(O)?f.get(O):0;L>0&&(f.set(O,L-1),R++)}return 2*R/(n.length+r.length-2)};M.compareTwoStringsUsingDiceCoefficient=fn;var pn=function(){return typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0)};M.browserSupportsPolyfills=pn;var G={},q={};Object.defineProperty(q,"__esModule",{value:!0});q.APPEND_TRANSCRIPT=q.CLEAR_TRANSCRIPT=void 0;var gn="CLEAR_TRANSCRIPT";q.CLEAR_TRANSCRIPT=gn;var hn="APPEND_TRANSCRIPT";q.APPEND_TRANSCRIPT=hn;Object.defineProperty(G,"__esModule",{value:!0});G.appendTranscript=G.clearTranscript=void 0;var we=q,vn=function(){return{type:we.CLEAR_TRANSCRIPT}};G.clearTranscript=vn;var dn=function(n,r){return{type:we.APPEND_TRANSCRIPT,payload:{interimTranscript:n,finalTranscript:r}}};G.appendTranscript=dn;var X={};Object.defineProperty(X,"__esModule",{value:!0});X.transcriptReducer=void 0;var Re=q,mn=M,yn=function(n,r){switch(r.type){case Re.CLEAR_TRANSCRIPT:return{interimTranscript:"",finalTranscript:""};case Re.APPEND_TRANSCRIPT:return{interimTranscript:r.payload.interimTranscript,finalTranscript:(0,mn.concatTranscripts)(n.finalTranscript,r.payload.finalTranscript)};default:throw new Error}};X.transcriptReducer=yn;var _e={},ne={};(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=function(){return/(android)/i.test(typeof navigator<"u"?navigator.userAgent:"")};o.default=n})(ne);var te={};(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.isNative=void 0;var n=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),r=function(T){return T===n};o.isNative=r;var f=n;o.default=f})(te);(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=m(ne),r=M,f=te;function m(h){return h&&h.__esModule?h:{default:h}}function T(h,a,t,i,g,l,p){try{var b=h[l](p),P=b.value}catch($){t($);return}b.done?a(P):Promise.resolve(P).then(i,g)}function u(h){return function(){var a=this,t=arguments;return new Promise(function(i,g){var l=h.apply(a,t);function p(P){T(l,i,g,p,b,"next",P)}function b(P){T(l,i,g,p,b,"throw",P)}p(void 0)})}}function R(h,a){if(!(h instanceof a))throw new TypeError("Cannot call a class as a function")}function v(h,a){for(var t=0;t<a.length;t++){var i=a[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(h,i.key,i)}}function O(h,a,t){return a&&v(h.prototype,a),h}var L=function(){function h(a){R(this,h),this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=function(){},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(a),(0,n.default)()&&(this.updateFinalTranscript=(0,r.debounce)(this.updateFinalTranscript,250,!0))}return O(h,[{key:"setSpeechRecognition",value:function(t){var i=!!t&&((0,f.isNative)(t)||(0,r.browserSupportsPolyfills)());i&&(this.disableRecognition(),this.recognition=new t,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(i)}},{key:"subscribe",value:function(t,i){this.subscribers[t]=i}},{key:"unsubscribe",value:function(t){delete this.subscribers[t]}},{key:"emitListeningChange",value:function(t){var i=this;this.listening=t,Object.keys(this.subscribers).forEach(function(g){var l=i.subscribers[g].onListeningChange;l(t)})}},{key:"emitMicrophoneAvailabilityChange",value:function(t){var i=this;this.isMicrophoneAvailable=t,Object.keys(this.subscribers).forEach(function(g){var l=i.subscribers[g].onMicrophoneAvailabilityChange;l(t)})}},{key:"emitTranscriptChange",value:function(t,i){var g=this;Object.keys(this.subscribers).forEach(function(l){var p=g.subscribers[l].onTranscriptChange;p(t,i)})}},{key:"emitClearTranscript",value:function(){var t=this;Object.keys(this.subscribers).forEach(function(i){var g=t.subscribers[i].onClearTranscript;g()})}},{key:"emitBrowserSupportsSpeechRecognitionChange",value:function(t){var i=this;Object.keys(this.subscribers).forEach(function(g){var l=i.subscribers[g],p=l.onBrowserSupportsSpeechRecognitionChange,b=l.onBrowserSupportsContinuousListeningChange;p(t),b(t)})}},{key:"disconnect",value:function(t){if(this.recognition&&this.listening)switch(t){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}},{key:"disableRecognition",value:function(){this.recognition&&(this.recognition.onresult=function(){},this.recognition.onend=function(){},this.recognition.onerror=function(){},this.listening&&this.stopListening())}},{key:"onError",value:function(t){t&&t.error&&t.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}},{key:"onRecognitionDisconnect",value:function(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}},{key:"updateTranscript",value:function(t){var i=t.results,g=t.resultIndex,l=g===void 0?i.length-1:g;this.interimTranscript="",this.finalTranscript="";for(var p=l;p<i.length;++p)i[p].isFinal&&(!(0,n.default)()||i[p][0].confidence>0)?this.updateFinalTranscript(i[p][0].transcript):this.interimTranscript=(0,r.concatTranscripts)(this.interimTranscript,i[p][0].transcript);var b=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(b=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,b||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}},{key:"updateFinalTranscript",value:function(t){this.finalTranscript=(0,r.concatTranscripts)(this.finalTranscript,t)}},{key:"resetTranscript",value:function(){this.disconnect("RESET")}},{key:"startListening",value:function(){var a=u(regeneratorRuntime.mark(function i(){var g,l,p,b,P,$,H=arguments;return regeneratorRuntime.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(g=H.length>0&&H[0]!==void 0?H[0]:{},l=g.continuous,p=l===void 0?!1:l,b=g.language,this.recognition){S.next=3;break}return S.abrupt("return");case 3:if(P=p!==this.recognition.continuous,$=b&&b!==this.recognition.lang,!(P||$)){S.next=11;break}if(!this.listening){S.next=9;break}return S.next=9,this.stopListening();case 9:this.recognition.continuous=P?p:this.recognition.continuous,this.recognition.lang=$?b:this.recognition.lang;case 11:if(this.listening){S.next=22;break}return this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript()),S.prev=13,S.next=16,this.start();case 16:this.emitListeningChange(!0),S.next=22;break;case 19:S.prev=19,S.t0=S.catch(13),S.t0 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1);case 22:case"end":return S.stop()}},i,this,[[13,19]])}));function t(){return a.apply(this,arguments)}return t}()},{key:"abortListening",value:function(){var a=u(regeneratorRuntime.mark(function i(){var g=this;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return this.disconnect("ABORT"),this.emitListeningChange(!1),p.next=4,new Promise(function(b){g.onStopListening=b});case 4:case"end":return p.stop()}},i,this)}));function t(){return a.apply(this,arguments)}return t}()},{key:"stopListening",value:function(){var a=u(regeneratorRuntime.mark(function i(){var g=this;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return this.disconnect("STOP"),this.emitListeningChange(!1),p.next=4,new Promise(function(b){g.onStopListening=b});case 4:case"end":return p.stop()}},i,this)}));function t(){return a.apply(this,arguments)}return t}()},{key:"getRecognition",value:function(){return this.recognition}},{key:"start",value:function(){var a=u(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(this.recognition&&!this.listening)){l.next=4;break}return l.next=3,this.recognition.start();case 3:this.listening=!0;case 4:case"end":return l.stop()}},i,this)}));function t(){return a.apply(this,arguments)}return t}()},{key:"stop",value:function(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}},{key:"abort",value:function(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}}]),h}();o.default=L})(_e);(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.useSpeechRecognition=void 0;var n=Ze,r=M,f=G,m=X,T=v(_e),u=v(ne),R=v(te);function v(e){return e&&e.__esModule?e:{default:e}}function O(e,c,s,d,w,y,_){try{var C=e[y](_),E=C.value}catch(F){s(F);return}C.done?c(E):Promise.resolve(E).then(d,w)}function L(e){return function(){var c=this,s=arguments;return new Promise(function(d,w){var y=e.apply(c,s);function _(E){O(y,d,w,_,C,"next",E)}function C(E){O(y,d,w,_,C,"throw",E)}_(void 0)})}}function h(e){return i(e)||t(e)||b(e)||a()}function a(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function i(e){if(Array.isArray(e))return P(e)}function g(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(s){return typeof s}:g=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},g(e)}function l(e,c){return H(e)||$(e,c)||b(e,c)||p()}function p(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(e,c){if(e){if(typeof e=="string")return P(e,c);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return P(e,c)}}function P(e,c){(c==null||c>e.length)&&(c=e.length);for(var s=0,d=new Array(c);s<c;s++)d[s]=e[s];return d}function $(e,c){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var s=[],d=!0,w=!1,y=void 0;try{for(var _=e[Symbol.iterator](),C;!(d=(C=_.next()).done)&&(s.push(C.value),!(c&&s.length===c));d=!0);}catch(E){w=!0,y=E}finally{try{!d&&_.return!=null&&_.return()}finally{if(w)throw y}}return s}}function H(e){if(Array.isArray(e))return e}var j=!!R.default,S=j&&!(0,u.default)(),I,Ce=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=c.transcribing,d=s===void 0?!0:s,w=c.clearTranscriptOnListen,y=w===void 0?!0:w,_=c.commands,C=_===void 0?[]:_,E=(0,n.useState)(z.getRecognitionManager()),F=l(E,1),W=F[0],Le=(0,n.useState)(j),ie=l(Le,2),Pe=ie[0],Me=ie[1],ke=(0,n.useState)(S),re=l(ke,2),Oe=re[0],Ee=re[1],De=(0,n.useReducer)(m.transcriptReducer,{interimTranscript:W.interimTranscript,finalTranscript:""}),ae=l(De,2),se=ae[0],oe=se.interimTranscript,ce=se.finalTranscript,ue=ae[1],Ne=(0,n.useState)(W.listening),le=l(Ne,2),Ie=le[0],ze=le[1],Fe=(0,n.useState)(W.isMicrophoneAvailable),fe=l(Fe,2),We=fe[0],Be=fe[1],pe=(0,n.useRef)(C);pe.current=C;var ge=function(){ue((0,f.clearTranscript)())},x=(0,n.useCallback)(function(){W.resetTranscript(),ge()},[W]),$e=function(A,N,U){var B=g(A)==="object"?A.toString():A,J=B.replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),K=(0,r.compareTwoStringsUsingDiceCoefficient)(J,N);return K>=U?{command:A,commandWithoutSpecials:J,howSimilar:K,isFuzzyMatch:!0}:null},je=function(A,N){var U=(0,r.commandToRegExp)(A),B=U.exec(N);return B?{command:A,parameters:B.slice(1)}:null},he=(0,n.useCallback)(function(D,A){pe.current.forEach(function(N){var U=N.command,B=N.callback,J=N.matchInterim,K=J===void 0?!1:J,me=N.isFuzzyMatch,ye=me===void 0?!1:me,be=N.fuzzyMatchingThreshold,qe=be===void 0?.8:be,Te=N.bestMatchOnly,Ge=Te===void 0?!1:Te,Q=!A&&K?D.trim():A.trim(),He=Array.isArray(U)?U:[U],V=He.map(function(k){return ye?$e(k,Q,qe):je(k,Q)}).filter(function(k){return k});if(ye&&Ge&&V.length>=2){V.sort(function(k,Z){return Z.howSimilar-k.howSimilar});var Y=V[0],xe=Y.command,Je=Y.commandWithoutSpecials,Ke=Y.howSimilar;B(Je,Q,Ke,{command:xe,resetTranscript:x})}else V.forEach(function(k){if(k.isFuzzyMatch){var Z=k.command,Qe=k.commandWithoutSpecials,Ve=k.howSimilar;B(Qe,Q,Ve,{command:Z,resetTranscript:x})}else{var Xe=k.command,Ye=k.parameters;B.apply(void 0,h(Ye).concat([{command:Xe,resetTranscript:x}]))}})})},[x]),ve=(0,n.useCallback)(function(D,A){d&&ue((0,f.appendTranscript)(D,A)),he(D,A)},[he,d]),de=(0,n.useCallback)(function(){y&&ge()},[y]);(0,n.useEffect)(function(){var D=z.counter;z.counter+=1;var A={onListeningChange:ze,onMicrophoneAvailabilityChange:Be,onTranscriptChange:ve,onClearTranscript:de,onBrowserSupportsSpeechRecognitionChange:Me,onBrowserSupportsContinuousListeningChange:Ee};return W.subscribe(D,A),function(){W.unsubscribe(D)}},[d,y,W,ve,de]);var Ue=(0,r.concatTranscripts)(ce,oe);return{transcript:Ue,interimTranscript:oe,finalTranscript:ce,listening:Ie,isMicrophoneAvailable:We,resetTranscript:x,browserSupportsSpeechRecognition:Pe,browserSupportsContinuousListening:Oe}};o.useSpeechRecognition=Ce;var z={counter:0,applyPolyfill:function(c){I?I.setSpeechRecognition(c):I=new T.default(c);var s=!!c&&(0,r.browserSupportsPolyfills)();j=s,S=s},removePolyfill:function(){I?I.setSpeechRecognition(R.default):I=new T.default(R.default),j=!!R.default,S=j&&!(0,u.default)()},getRecognitionManager:function(){return I||(I=new T.default(R.default)),I},getRecognition:function(){var c=z.getRecognitionManager();return c.getRecognition()},startListening:function(){var e=L(regeneratorRuntime.mark(function s(){var d,w,y,_,C=arguments;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return d=C.length>0&&C[0]!==void 0?C[0]:{},w=d.continuous,y=d.language,_=z.getRecognitionManager(),F.next=4,_.startListening({continuous:w,language:y});case 4:case"end":return F.stop()}},s)}));function c(){return e.apply(this,arguments)}return c}(),stopListening:function(){var e=L(regeneratorRuntime.mark(function s(){var d;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return d=z.getRecognitionManager(),y.next=3,d.stopListening();case 3:case"end":return y.stop()}},s)}));function c(){return e.apply(this,arguments)}return c}(),abortListening:function(){var e=L(regeneratorRuntime.mark(function s(){var d;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return d=z.getRecognitionManager(),y.next=3,d.abortListening();case 3:case"end":return y.stop()}},s)}));function c(){return e.apply(this,arguments)}return c}(),browserSupportsSpeechRecognition:function(){return j},browserSupportsContinuousListening:function(){return S}},Ae=z;o.default=Ae})(Se);(function(o){function n(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(v){return typeof v}:n=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},n(u)}Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"useSpeechRecognition",{enumerable:!0,get:function(){return r.useSpeechRecognition}}),o.default=void 0;var r=m(Se);function f(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return f=function(){return u},u}function m(u){if(u&&u.__esModule)return u;if(u===null||n(u)!=="object"&&typeof u!="function")return{default:u};var R=f();if(R&&R.has(u))return R.get(u);var v={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in u)if(Object.prototype.hasOwnProperty.call(u,L)){var h=O?Object.getOwnPropertyDescriptor(u,L):null;h&&(h.get||h.set)?Object.defineProperty(v,L,h):v[L]=u[L]}return v.default=u,R&&R.set(u,v),v}var T=r.default;o.default=T})(ee);const bn=en(ee),Rn=nn({__proto__:null,default:bn},[ee]);export{Rn as i};
